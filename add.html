<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Add Product</title>
  <style>
    /* Basic styling */
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f1f1f1;
    }

    header {
      background-color: #00ffd5;
      padding: 10px;
      text-align: center;
      font-size: 24px;
      color: white;
    }

    .add-btn {
      background-color: #00ffd5;
      padding: 10px 20px;
      border: none;
      cursor: pointer;
      margin: 20px;
    }

    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      justify-content: center;
      align-items: center;
    }

    .modal-content {
      background-color: white;
      padding: 20px;
      width: 300px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    .modal-content input, .modal-content textarea {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    .modal-content button {
      width: 100%;
      padding: 10px;
      background-color: #00ffd5;
      border: none;
      cursor: pointer;
    }

    .product-card {
      background-color: white;
      padding: 20px;
      margin: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    .product-card img {
      width: 100%;
      height: auto;
      max-width: 100px;
      max-height: 100px;
    }

    .product-card h3 {
      margin: 10px 0;
    }

    .product-card .price {
      font-weight: bold;
      color: #00ffd5;
    }

    .product-card button {
      background-color: #00ffd5;
      padding: 5px 10px;
      border: none;
      cursor: pointer;
    }

    .product-card .delete-btn {
      background-color: red;
      margin-left: 10px;
    }

    .container {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-around;
    }
  </style>
</head>
<body>

<header>Add New Product</header>

<button class="add-btn" onclick="showModal()">+ Add Product</button>

<div class="container" id="product-container"></div>

<!-- Modal -->
<div class="modal" id="productModal">
  <div class="modal-content">
    <span class="close" onclick="closeModal()">&times;</span>
    <h3 style="color: #00ffd5; margin-bottom: 1rem;">Add Product</h3>
    <input type="file" id="productImage" accept="image/*">
    <input type="text" id="productName" placeholder="Product Name">
    <input type="text" id="productPrice" placeholder="e.g. â‚¦5000 or $25">
    <textarea id="productDesc" placeholder="Short Description (max 4 lines)"></textarea>
    <button class="submit-btn" onclick="addProduct()">Add to Page</button>
  </div>
</div>

<div>
  <a href="products.html">See All Products</a>
</div>

<script>
  const container = document.getElementById("product-container");

  function showModal() {
    document.getElementById("productModal").style.display = "flex";
  }

  function closeModal() {
    document.getElementById("productModal").style.display = "none";
  }

  function addProduct() {
    const imageInput = document.getElementById("productImage");
    const name = document.getElementById("productName").value;
    const price = document.getElementById("productPrice").value;
    const desc = document.getElementById("productDesc").value;

    if (!imageInput.files[0] || !name || !price || !desc) {
      alert("Please fill all fields.");
      return;
    }

    const reader = new FileReader();
    reader.onload = function (e) {
      const imageData = e.target.result;
      const product = { image: imageData, name, price, desc };
      
      const products = JSON.parse(localStorage.getItem("products") || "[]");
      products.push(product);
      localStorage.setItem("products", JSON.stringify(products));

      clearInputs();
      closeModal();
      loadProducts();
    };
    reader.readAsDataURL(imageInput.files[0]);
  }

  function deleteProduct(index) {
    const products = JSON.parse(localStorage.getItem("products") || "[]");
    products.splice(index, 1); // Remove the product from the array
    localStorage.setItem("products", JSON.stringify(products));
    loadProducts(); // Re-load the products after deletion
  }

  function renderProduct(product, index) {
    const card = document.createElement("div");
    card.classList.add("product-card");
    card.innerHTML = `
      <img src="${product.image}" alt="${product.name}">
      <h3>${product.name}</h3>
      <p class="price">${product.price}</p>
      <p class="description">${product.desc}</p>
      <div style="display: flex; justify-content: space-between; gap: 10px; margin-top: 10px;">
        <button class="buy-btn">Buy</button>
        <button class="delete-btn" onclick="deleteProduct(${index})">Delete</button>
        <a href="products.html"><button class="buy-btn">See All Products</button></a>
      </div>
    `;
    container.appendChild(card);
  }

  function clearInputs() {
    document.getElementById("productImage").value = '';
    document.getElementById("productName").value = '';
    document.getElementById("productPrice").value = '';
    document.getElementById("productDesc").value = '';
  }

  function loadProducts() {
    container.innerHTML = "";
    const products = JSON.parse(localStorage.getItem("products") || "[]");
    products.forEach((p, i) => renderProduct(p, i));
  }

  window.onload = loadProducts;
</script>

</body>
</html>
